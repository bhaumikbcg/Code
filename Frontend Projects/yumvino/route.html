<?php
ob_start();
session_start();
?>
<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Route</title>
	<link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
	<link rel="stylesheet" href="css/style.css" />
</head>
<body class="inner-page">
<?php
$profile = $_SESSION["username"];
//$profile = $_POST["email"];
?>
	<header class="nav-head-bkgd">
		<div class="red-bar text-right">
		
			<section class="container">
				<span class="login"><a href="#" data-toggle="modal" data-target="#myModal">Login</a> | <a href="#" data-toggle="modal" data-target="#myModal2">Register</a></span>
				
				<div class="btn-group margin-left20">
					<button class="btn btn-primary btn-xs browse-button" type="button" data-toggle="modal" data-target="#myModal3"><span class="glyphicon glyphicon-search"></span>
					Browse
					</button>	
				</div>
			</section> 
		</div>
		
		<div id="myModal3" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
			<div class="modal-dialog modal-pos">
				<div class="modal-content abs">

					
					<div class="modal-body">
						<form action="form">
							<div class="form-group">
								<label for="exampleInputName" class="red-text">Varietals</label>
									<select class="form-control">
										<option>Cabernet Sauvignon</option>
										<option>Chardonnay</option>
										<option>Merlot</option>
									</select>
								
							</div>
							
							<div class="form-group">
								<label for="exampleInputEmail1" class="red-text">Price</label>
								<select class="form-control">
									<option>$5 to $50</option>
									<option>$51 to $100</option>
									<option>$101 to $150</option>
									<option>$151 to $200</option>
									<option>$201 to $250</option>
							</select>
							</div>
				
							
							<div class="form-group">
								<label for="exampleInputPhone" class="red-text">Distance</label>
								<select class="form-control">
									<option>0miles to 10miles</option>
									<option>11miles to 20miles</option>
									<option>21miles to 30miles</option>
									<option>31miles to 40miles</option>
									<option>41miles to 50miles</option>
									<option>51miles and more</option>
								</select>
							</div>
							
							<div class="form-group">
								<ul class="list-inline">
								<li class="deals"><label for="exampleInputPhone" class="red-text">Deal</label></li>
									
									<li><div class="radio">
										<label><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="yes">Yes</label>
									</div></li>
									<li><div class="radio">
										<label><input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">No</label>
									</div></li>
								</ul>
							</div>
							
							<div class="form-group">
								<ul class="list-inline">
								<li class="deals"><label for="exampleInputPhone" class="red-text">Wine</label></li>
									
									<li><div class="radio">
										<label><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="">Yes</label>
									</div></li>
									<li><div class="radio">
										<label><input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">No</label>
									</div></li>
								</ul>
							</div>
							
							<div class="form-group">
							<label class="pull-left margin-right20 red-text" for="exampleInputPhone">Size</label>
							<div class="btn-group size-button">
								<button type="button" class="btn btn-default">small</button>
								<button type="button" class="btn btn-default">medium</button>
								<button type="button" class="btn btn-default">large</button>
							</div>
							</div>

						</form>
					</div>
					<div class="modal-footer no-border padding-top0">
						<a class="btn-default btn pull-right" href="routes2.html" style="background-color:#B81C33; color:white;">Search</a>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		
		
		
		<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
			<div class="modal-dialog modal-in-center">
				<div class="modal-content">

					<div class="modal-header padding-left30">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove"></span></button>
						<h3 class="modal-title red-text" id="myModalLabel"><b>Login</b></h3>
					</div>
					
					<div class="modal-body">
						<form role="form">
							<div class="form-group padding-lr10">
								<label for="exampleInputEmail1" class=" red-text">Username</label>
								<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter Username">
							</div>
							<div class="form-group padding-lr10">
								<label for="exampleInputPassword1" class=" red-text">Password</label>
								<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
							</div>
							<div class="register pull-left col-md-6 col-sm-6 col-xs-12 margin-left10">
							<span class="">Don't have an account? <a data-target="" class="blue-text">Register</a></span>
							</div>
							<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group col-md-12 col-sm-12 col-xs-12 margin-bottom10">
								<a href="#" class="help-block pull-right blue-text">Forgot Password?</a>
							</div>
							<div class="checkbox col-md-12 col-sm-12 col-xs-12 padding-left0">
								<label class="pull-right">
									<input type="checkbox" > Remember Me
								</label>
							</div>
							</div>
							
						</form>
					</div>
					
					<div class="modal-footer no-border padding-top0 ">
						<button type="submit" class="btn btn-default margin-right30 login-button">Submit</button>
						</br>
						<div class="col-sm-12 col-md-12 col-xs-12 text-center">
							<p class="text-center">OR</p>
							<button type="submit" class="btn btn-default login-button"><span class="glyphicon glyphicon-user margin-right30"></span>Connect with Facebook</button>
							<!-- <div class="facebook col-md-8 col-sm-8 col-xs-8 text-center"><span class="glyphicon glyphicon-user"></span>Connect with Facebook</div> -->
						</div>
					</div>

				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		
		
		
		<div id="myModal2" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
			<div class="modal-dialog modal-in-center">
				<div class="modal-content">

					<div class="modal-header padding-left30">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove"></span></button>
						<h3 class="modal-title red-text" id="myModalLabel"><b>Register</b></h3>
					</div>
					<div class="modal-body">
						<form role="form">
							<div class="form-group padding-lr10">
								<label for="exampleInputName" class="red-text">Name</label>
								<input type="text" class="form-control" id="exampleInputName" placeholder="First Name and Last Name">
							</div>
							<div class="form-group padding-lr10">
								<label for="exampleInputName" class="red-text">Desired Username</label>
								<input type="text" class="form-control" id="exampleInputName" placeholder="Enter Username">
							</div>
							<div class="form-group padding-lr10">
								<label for="exampleInputEmail1" class="red-text">Email Address</label>
								<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter Email">
							</div>
							<div class="form-group padding-lr10">
								<label for="exampleInputPhone" class="red-text">Password</label>
								<input type="text" class="form-control" id="exampleInputPhone" placeholder="Password">
							</div>
							<div class="checkbox col-md-12 col-sm-12 col-xs-12 padding-left0">
								<label class="pull-left padding-left30">
									<input type="checkbox"> I wish to recieve an occasional newsletter from yumvino with news and deals.
								</label>
							</div>
							<div class="col-md-12 col-sm-12 col-xs-12">
							<div class="col-md-6 col-sm-6 hidden-xs"></div>
							<div class="pull-left col-md-6 col-sm-6 col-xs-12 padding-left0 padding-right0 text-center"><p>By signing up I agree to Yumvino's </br><a class="blue-text" data-target="">Terms & Conditions</a> and <a class="blue-text" data-target="">Privacy Policy</a></p></div>
							</div>
						</form>
					
					<span class="pull-left padding-left30">Already a Yumvino member? <a data-target="" class="blue-text">Login</a></span>
					<div class="modal-footer no-border padding-top0">
						<button type="submit" class="btn btn-default login-button margin-right30">Sign up</button>
					</div>

				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
	</div>
		
		
	<nav class="top-navmenu navbar navbar-default col-md-12 logo_nav" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="toggle-button navbar-toggle nav_button collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar white"></span>
            <span class="icon-bar white"></span>
            <span class="icon-bar white"></span>
          </button>
          <div class="logo-holder col-md-12 col-lg-12"><a class="navbar-brand" href="index.html" style="padding-top:0;">
	<img src="imgs/yumvino-logo-mob.png" alt="yumvino logo" /></a>
	</div>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1" style="height: auto;">
        <ul class=" nav navbar-nav navbar-right menu-to-right">
            <li class="border-menu"><a href="review.html"><img src="imgs/review-icon.png" alt="review-icon" /><span class="menu-name-to-right">Review</span></a></li>
			<li class="border-menu"><a href="profile.html"><img src="imgs/profile-icon.png" alt="profile-icon" /><span class="menu-name-to-right">Profile</span></a></li>
			<li class="border-menu"><a href="maps.html"><img src="imgs/maps-icon.png" alt="maps-icon" /><span class="menu-name-to-right">Maps</span></a></li>
			<li class="border-menu"><a href="deals.html"><img src="imgs/deals-icon.png" alt="deals-icon" /><span class="menu-name-to-right">Deals</span></a></li>
			<li class="border-menu"><a href="routes1.html"><img src="imgs/routes-icon.png" alt="routes-icon" /><span class="menu-name-to-right">Routes</span></a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
	
	<div class="red-border">
	</div>
		
		<section class="container">
		<form class="col-md-12 col-xs-12 search" role="form">
			<div class="search-bkgd input-group col-xs-12 col-sm-12 col-md-6 md-lg-5 pull-right">
				<div class="col-lg-10 pull-right">
        <div class="input-group">
          <input type="text" class="form-control">
          <span class="input-group-btn">
            <button class="main-search-btn btn btn-default" type="button"><span class="glyphicon glyphicon-search"></span></button>
          </span>
        </div><!-- /input-group -->
      </div>
	  
			<div class="btn-group col-md-12 col-xs-12 visible-xs">
				<button class="filter-drop btn btn-default btn-xs dropdown-toggle pull-right" type="button" data-toggle="dropdown">
				FILTER BY <span class="caret"></span>
				</button>
				
				<ul class="dropdown-menu pull-right" role="menu">
					<li><a href="#">Location</a></li>
					<li><a href="#">Taste</a></li>
					<li><a href="#">Cost</a></li>
					<li class="divider"></li>
					<li class="dropdown-header">+ More Filters</li>
					<li><a class="black-text" href="#">filter1</a></li>
					<li><a class="black-text" href="#">filter2</a></li>
					<li><a class="black-text" href="#">filter3</a></li>
				</ul>
			</div>
			
			
			<ul class="filterby pull-right hidden-xs">
				<li>FILTER BY</li>
				<li><a href="#">Location</a></li>
				<li><a href="#">Taste</a></li>
				<li><a href="#">Cost</a></li>
				<li> 
				
					<div class="dropdown">
					<button class="btn dropdown-toggle more-filter-button padding-left0" type="button" data-toggle="dropdown">
						+ More Filters
					</button>
						<ul class="dropdown-menu more-filter-drop">
						<li><a class="black-text" href="#">Filter 1</a></li>
						<li><a class="black-text" href="#">Filter 2</a></li>
						<li><a class="black-text" href="#">Filter 3</a></li>
						</ul>
					</div>
				</li>
			</ul>
			</div>
		</form>		
			
	</section>
	</header>
	
	<div class="main-container">
		<section class="container">
			
			<div class="row">

				<div class="col-xs-12 col-md-5 col-sm-12">
		<h2></h2>
				<!--<div class="col-md-12 col-xs-12 col-sm-12 description">
				<div class="col-md-12 col-sm-12 col-xs-12 pull_left">
					<h3 class="margin-bottom0 red-text margin-top10"><b>Suhas's Summer Day Trip</b></h3>
					<h5 class="red-text">(Napa Valley, CA)</h5>
				</div>
				
				<p class="col-md-6 col-sm-6 col-xs-6 padding-right0">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
				<div class="col-md-3 col-sm-3 col-xs-3 padding-left0 padding-right0">
					<span class="pull-left margin-left20 blue-text"><b>Route 1</b></span></br>
					<span class="pull-left margin-left20">8 miles</span>
				</div>
				<div class="col-md-3 col-sm-3 col-xs-3 padding-left0 padding-right0 rating">
					<span class="pull-right">81 likes</span></br>
					<button class="red-btn btn pull-right "><span class="glyphicon glyphicon-glass margin-right10"></span>Like</button>
				</div>
			</div>-->
			
				
				<?php
				$variety = $_POST["variety"];
				$price = $_POST["price"];
				$distance = $_POST["distance"];
				$distance1 = $distance-9;
				$price1 = $price-200;
				?>
				<?php
					$con = mysqli_connect("mysql11.000webhost.com","a9308444_bhaumik","5248ebdh","a9308444_first");
					$sql = "SELECT * FROM map WHERE variety = '$variety' AND price BETWEEN $price1 AND $price AND distance BETWEEN $distance1 AND $distance";
					$result = mysqli_query($con, $sql);
					if($result==null){
						print 'There are no comments at this moment.';
					}
					else{
						if (mysqli_num_rows($result) > 0) {
						// output data of each row
						while($row = mysqli_fetch_assoc($result)) {
						?>
						<div class="col-md-12 col-sm-12 col-xs-12 padding-left0 padding-right0">
						<div class="col-md-1 col-sm-1 col-xs-1 margin-top10">
					<span class="glyphicon glyphicon-map-marker blue-text"></span>
				</div>
				<div class="col-md-6 col-sm-6 col-xs-6 padding-left0 padding-right0">
					<h4 class="red-text"><b><?php print $row["wine"];?></b></h4>
					<span><?php print $row["street"];?></br><?php print $row["city"];?></span>
				</div>
				<div class="col-md-5 col-sm-5 col-xs-5 padding-left0 padding-right0 margin-top10">
					<span class="pull-right">16 reviews</span></br>
					<span class="pull-right">3.5</span>
					<span id="5" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="4" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="3" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="2" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="1" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
				</div>
				</div>
				<?php
				}}}
				mysqli_close($con);
			?>
			<span class="btn-holder col-md-12 col-xs-12 pull-left">
					<a class="btn-default btn pull-right" href="search.html" style="background-color:#B81C33; color:white;">Search again</a>
				</span>
			
			<!--<div class="col-md-12 col-sm-12 col-xs-12 padding-left0 padding-right0">
				<div class="col-md-1 col-sm-1 col-xs-1 margin-top10">
					<span class="glyphicon glyphicon-map-marker blue-text"></span>
				</div>
				<div class="col-md-6 col-sm-6 col-xs-6 padding-left0 padding-right0">
					<h4 class="red-text"><b>Breck's Winery</b></h4>
					<span>King's Cross St Pancras Station,</br>Pancras Road, CA</span>
				</div>
				<div class="col-md-5 col-sm-5 col-xs-5 padding-left0 padding-right0 margin-top10">
					<span class="pull-right">16 reviews</span></br>
					<span class="pull-right">3.5</span>
					<span id="5" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="4" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="3" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="2" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="1" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
				</div>
			</div>
			<div class="col-md-12 col-sm-12 col-xs-12 padding-left0 padding-right0">
				<div class="col-md-1 col-sm-1 col-xs-1 margin-top10">
					<span class="glyphicon glyphicon-map-marker blue-text"></span>
				</div>
				<div class="col-md-6 col-sm-6 col-xs-6 padding-left0 padding-right0">
					<h4 class="red-text"><b>Hemant's Winery</b></h4>
					<span>King's Cross St Pancras Station,</br>Pancras Road, CA</span>
				</div>
				<div class="col-md-5 col-sm-5 col-xs-5 padding-left0 padding-right0 margin-top10">
					<span class="pull-right">16 reviews</span></br>
					<span class="pull-right">3.5</span>
					<span id="5" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="4" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="3" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="2" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
					<span id="1" class="red-text glyphicon glyphicon-star pull-right glyph-size"></span>
				</div>
			</div>-->
			
			
			
				</div>
				
				<div class="col-md-7 col-sm-12 col-xs-12">
				<div class="google-map-canvas" id="map-canvas">
				</div>
				</div>
			</div>
		</section>
	</div>

<footer>
	<section class="container">
	<span class="text-right col-sm-12">Copyright &#169; 2016 Yumvino Inc. All rights reserved</span>
	</section>
</footer>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
	
	<script>
	var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;
  $(function(){
	$('#submit').on('click',function(){
		calcRoute();
	});
	initialize();
  });
  // initialize the Google Map API.
  function initialize() {
    //directionsDisplay = new google.maps.DirectionsRenderer();
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
      zoom:15,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    //directionsDisplay.setMap(map);
	<?php
				$variety = $_POST["variety"];
				$price = $_POST["price"];
				$distance = $_POST["distance"];
				$distance1 = $distance-9;
				$price1 = $price-200;
				?>
				<?php
					$con = mysqli_connect("mysql11.000webhost.com","a9308444_bhaumik","5248ebdh","a9308444_first");
					$sql = "SELECT * FROM map WHERE variety = '$variety' AND price BETWEEN $price1 AND $price AND distance BETWEEN $distance1 AND $distance";
					$result = mysqli_query($con, $sql);
					$latitude = array();
							$longitude= array();
							$wine = array();
							$city = array();
					if($result==null){
						print 'There are no comments at this moment.';
					}
					else{
						if (mysqli_num_rows($result) > 0) {
						// output data of each row
						$i = 0;
						while($row = mysqli_fetch_assoc($result)) {
						//$latitude = $row["latitude"];
						//$longitude = $row["longitude"];
						
							$latitude[i] = $row["latitude"];
							$longitude[i] = $row["longitude"];
							$wine[i] = $row["wine"];
							$city[i] = $row["city"];
							$i++;
						
						?>
						<?php
				}}}
				mysqli_close($con);
			?>
	/*var markers = [
		['<?php $wine[0].", ".$city[0] ?>', <?php echo $latitude[0] ?>, <?php echo $longitude[0] ?>],
		['<?php echo $wine[1].", ".$city[1] ?>', <?php echo $latitude[1] ?>, <?php echo $longitude[1] ?>]
	];*/					
	
	
	var markers = [
		['Trahan Winery, Napa', 38.297674,-122.288334],
        ['Brown Winery, Napa', 38.304959,-122.286334]
	];
	//['Palace of Westminster, London', 38.350844,-122.301128]
	
		
	// Loop through our array of markers & place each one on the map  
    for( i = 0; i < markers.length; i++ ) {
        var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
        bounds.extend(position);
        marker = new google.maps.Marker({
            position: position,
            map: map,
            title: markers[i][0]
        });
		
		// Automatically center the map fitting all markers on the screen
        map.fitBounds(bounds);
    }

	// Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
    var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
        this.setZoom(14);
        google.maps.event.removeListener(boundsListener);
    });

  }
  
 
  //Find the Start and End Destination on google Map
  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
	</script>
</body>
</html>
<?php
ob_flush();
?>